<html><body>
<div id="app">Loading...</div>
<script>
function register_service_worker() {
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/playground4offline/sw.js')
      .then(() => console.log('Service Worker registered successfully.'))
      .catch(error => console.log('Service Worker registration failed:', error));
  }
}  
</script>  
<script>
import('https://webr.r-wasm.org/latest/webr.mjs').then(
  register_service_worker();
  async ({ WebR }) => {
    const webR = new WebR();
    await webR.init();

    let result = await webR.evalR('rnorm(10,5,1)');
    let output = await result.toArray();    
    console.log('Result of running `rnorm` from webR: ', output);
    const app = document.getElementById("app");
    app.innerHTML = '<p>Result of running `rnorm` from webR:</p><pre>'+output+'</pre>';
  }
);
</script>

</body></html>